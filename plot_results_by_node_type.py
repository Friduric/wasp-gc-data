import numpy as np
import matplotlib.pyplot as plt

# SVD
laptop_svd = np.array([96.01747870445251, 91.77158284187317, 86.88255643844604, 81.68997812271118, 81.22474503517151, 92.30475497245789, 87.88651919364929, 98.4250545501709, 81.31174564361572, 81.90592050552368])
two_standard_nodes_1cpus_svd = np.array([31.95614981651306, 22.8770911693573, 19.863677978515625, 20.020698070526123, 19.112498998641968, 19.972911834716797, 19.014009952545166, 20.785333156585693, 18.83063006401062, 18.882554054260254])
two_standard_nodes_2cpus_svd = np.array([24.47728395462036, 10.762470960617065, 9.360445022583008, 9.297807931900024, 8.809758186340332, 9.87907099723816, 9.143058061599731, 9.490516901016235, 8.751528024673462, 8.777113914489746])
two_highmem_nodes_2cpus_svd = np.array([25.854040145874023, 11.084419965744019, 9.577297925949097, 9.371554136276245, 9.04636001586914, 9.766940832138062, 8.910305976867676, 9.262684106826782, 8.610005855560303, 8.575654983520508])
two_highcpu_nodes_2cpus_svd = np.array([23.40473699569702, 10.576480150222778, 9.275546073913574, 9.214131116867065, 8.96892786026001, 9.627201795578003, 9.214154958724976, 9.503830909729004, 8.574470043182373, 8.814279079437256])

svd_means = [laptop_svd.mean(), two_standard_nodes_1cpus_svd.mean(), two_standard_nodes_2cpus_svd.mean(), two_highmem_nodes_2cpus_svd.mean(), two_highcpu_nodes_2cpus_svd.mean()]
svd_stds = [laptop_svd.std(), two_standard_nodes_1cpus_svd.std(), two_standard_nodes_2cpus_svd.std(), two_highmem_nodes_2cpus_svd.std(), two_highcpu_nodes_2cpus_svd.std()]

# PCA
laptop_pca = np.array([33.3845911026001, 33.41750454902649, 35.94286108016968, 34.068347692489624, 32.02819347381592, 33.09368062019348, 32.956276416778564, 34.742011308670044, 34.44196701049805, 35.271657943725586])
two_standard_nodes_1cpus_pca = np.array([6.338209867477417, 4.991994142532349, 4.6073338985443115, 4.827978134155273, 4.975945949554443, 5.228058815002441, 4.5201239585876465, 4.331599950790405, 4.892102003097534, 5.45251202583313])
two_standard_nodes_2cpus_pca = np.array([3.9556400775909424, 3.3478360176086426, 3.0208020210266113, 3.1000888347625732, 3.6284029483795166, 3.080571174621582, 3.274963855743408, 3.1641528606414795, 3.331601858139038, 3.304213047027588])
two_highmem_nodes_2cpus_pca = np.array([4.016368865966797, 3.418325901031494, 3.4009318351745605, 3.318655014038086, 3.6958439350128174, 3.2481601238250732, 3.3515288829803467, 3.5360219478607178, 3.368454933166504, 3.43925404548645])
two_highcpu_nodes_2cpus_pca = np.array([3.9897470474243164, 3.1598880290985107, 3.591996908187866, 3.644091844558716, 3.1156539916992188, 3.0603840351104736, 3.144700050354004, 3.283010959625244, 3.035750150680542, 3.1718909740448])

pca_means = [laptop_pca.mean(), two_standard_nodes_1cpus_pca.mean(), two_standard_nodes_2cpus_pca.mean(), two_highmem_nodes_2cpus_pca.mean(), two_highcpu_nodes_2cpus_pca.mean()]
pca_stds = [laptop_pca.std(), two_standard_nodes_1cpus_pca.std(), two_standard_nodes_2cpus_pca.std(), two_highmem_nodes_2cpus_pca.std(), two_highcpu_nodes_2cpus_pca.std()]

x = np.arange(5)

fig, ax = plt.subplots()
p1 = plt.bar(x, svd_means, bottom=pca_means, yerr=svd_stds)
p2 = plt.bar(x, pca_means, yerr=pca_stds)
plt.xticks(x, ('C0', 'C1', 'C2', 'C3', 'C4'))

plt.legend((p1[0], p2[0]), ('SVD', 'PCA'))

fig.savefig("execution_times_by_cluster.eps", bbox_inches='tight')
fig.savefig("execution_times_by_cluster.png", bbox_inches='tight')
fig.savefig("execution_times_by_cluster.svg", bbox_inches='tight')

plt.show()


