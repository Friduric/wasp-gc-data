import numpy as np
import matplotlib.pyplot as plt

# SVD execution times
et_svd = np.array([[31.95614981651306, 22.8770911693573, 19.863677978515625, 20.020698070526123, 19.112498998641968, 19.972911834716797, 19.014009952545166, 20.785333156585693, 18.83063006401062, 18.882554054260254],
                  [35.67397689819336, 19.79287600517273, 16.477819204330444, 16.538218021392822, 16.248167991638184, 17.59150505065918, 16.386842012405396, 17.32415199279785, 15.898189067840576, 15.287463188171387],
                  [31.262952089309692, 19.381293058395386, 16.405333995819092, 15.48216199874878, 15.630318880081177, 17.27308702468872, 15.639727115631104, 15.816808938980103, 13.93074107170105, 14.66155219078064],
                  [32.121683835983276, 23.33402419090271, 20.372668981552124, 20.15979790687561, 20.07334804534912, 21.430482149124146, 19.454498052597046, 21.0326669216156, 19.658002138137817, 19.538650035858154],
                  [31.541428089141846, 19.67282509803772, 15.562182903289795, 15.974431991577148, 15.989508152008057, 16.88449192047119, 16.356063842773438, 16.662007093429565, 14.748564004898071, 15.56258511543274]])

#Execution times pca:
et_pca = np.array([[6.338209867477417, 4.991994142532349, 4.6073338985443115, 4.827978134155273, 4.975945949554443, 5.228058815002441, 4.5201239585876465, 4.331599950790405, 4.892102003097534, 5.45251202583313],
                  [6.3678200244903564, 5.059544086456299, 5.156126022338867, 4.715986013412476, 5.4399449825286865, 4.788336992263794, 4.5235888957977295, 4.272072076797485, 4.15265417098999, 3.959594964981079],
                  [5.179049968719482, 4.639771938323975, 4.703819036483765, 3.9479660987854004, 4.063961982727051, 4.052390098571777, 4.211709976196289, 4.236518144607544, 4.179874897003174, 4.275703191757202],
                  [8.680815935134888, 5.771799087524414, 5.103301048278809, 4.248089075088501, 4.752786874771118, 4.983352899551392, 5.640420913696289, 5.179481029510498, 4.596297979354858, 4.435721158981323],
                  [5.5722877979278564, 4.696692943572998, 4.859127044677734, 4.160127878189087, 4.0715789794921875, 4.248111963272095, 4.043802976608276, 4.120073080062866, 4.400238037109375, 4.947695016860962]])

# print(et_svd.shape)
# print(et_pca.shape)

mean_svd = np.mean(et_svd, axis=1)
mean_pca = np.mean(et_pca, axis=1)
std_svd = np.std(et_svd, axis=1)
std_pca = np.std(et_pca, axis=1)

fig, ax = plt.subplots()

ax.plot([2,3,4,5,6], mean_svd, lw=2, label='SVD', color='blue')
ax.plot([2,3,4,5,6], mean_pca, lw=2, label='PCA', color='red')

ax.plot([2,3,4,5,6], mean_svd+std_svd, linestyle=':', lw=2, color='blue')
ax.plot([2,3,4,5,6], mean_pca+std_pca, linestyle=':', lw=2, color='red')

ax.plot([2,3,4,5,6], mean_svd-std_svd, linestyle=':', lw=2, color='blue')
ax.plot([2,3,4,5,6], mean_pca-std_pca, linestyle=':', lw=2, color='red')

# ax.fill_between([2,3,4,5,6], mean_svd+std_svd, mean_svd-std_svd, facecolor='blue', alpha=0.3)
# ax.fill_between([2,3,4,5,6], mean_pca+std_pca, mean_pca-std_pca, facecolor='red', alpha=0.3)



plt.xticks(np.arange(1, 7, step=1))

ax.legend(loc='upper left')
ax.set(xlabel='worker nodes', ylabel='execution time [s]')

fig.savefig("execution_times.eps", bbox_inches='tight')
fig.savefig("execution_times.png", bbox_inches='tight')
fig.savefig("execution_times.svg", bbox_inches='tight')

plt.show()